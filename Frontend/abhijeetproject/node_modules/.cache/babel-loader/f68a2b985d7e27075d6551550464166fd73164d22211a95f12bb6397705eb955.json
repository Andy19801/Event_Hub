{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';// Async thunk for changing password\nexport const changePassword=createAsyncThunk('auth/changePassword',async(_ref,_ref2)=>{let{currentPassword,newPassword}=_ref;let{rejectWithValue}=_ref2;try{// Replace with your API call to change password\nconst response=await fetch('/api/change-password',{method:'POST',headers:{'Content-Type':'application/json'// Include token if needed\n// 'Authorization': `Bearer ${getState().auth.token}`,\n},body:JSON.stringify({currentPassword,newPassword})});if(!response.ok){throw new Error('Failed to change password');}const data=await response.json();return data;// Adjust based on your API response\n}catch(error){return rejectWithValue(error.message);}});const initialState={user:null,token:localStorage.getItem('authToken')||null,changePasswordStatus:'idle',// Track status of change password request\nchangePasswordError:null};const authSlice=createSlice({name:'auth',initialState,reducers:{setCredentials:(state,action)=>{const{user,token}=action.payload;state.user=user;state.token=token;localStorage.setItem('authToken',token);},logout:state=>{state.user=null;state.token=null;localStorage.removeItem('authToken');}},extraReducers:builder=>{builder.addCase(changePassword.pending,state=>{state.changePasswordStatus='loading';state.changePasswordError=null;}).addCase(changePassword.fulfilled,state=>{state.changePasswordStatus='succeeded';state.changePasswordError=null;}).addCase(changePassword.rejected,(state,action)=>{state.changePasswordStatus='failed';state.changePasswordError=action.payload;});}});export const{setCredentials,logout}=authSlice.actions;export default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","changePassword","_ref","_ref2","currentPassword","newPassword","rejectWithValue","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","error","message","initialState","user","token","localStorage","getItem","changePasswordStatus","changePasswordError","authSlice","name","reducers","setCredentials","state","action","payload","setItem","logout","removeItem","extraReducers","builder","addCase","pending","fulfilled","rejected","actions","reducer"],"sources":["G:/Event Event Hub/Frontend/abhijeetproject/src/features/auth/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\n// Async thunk for changing password\r\nexport const changePassword = createAsyncThunk(\r\n  'auth/changePassword',\r\n  async ({ currentPassword, newPassword }, { rejectWithValue }) => {\r\n    try {\r\n      // Replace with your API call to change password\r\n      const response = await fetch('/api/change-password', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          // Include token if needed\r\n          // 'Authorization': `Bearer ${getState().auth.token}`,\r\n        },\r\n        body: JSON.stringify({ currentPassword, newPassword }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to change password');\r\n      }\r\n\r\n      const data = await response.json();\r\n      return data; // Adjust based on your API response\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n\r\nconst initialState = {\r\n  user: null,\r\n  token: localStorage.getItem('authToken') || null,\r\n  changePasswordStatus: 'idle', // Track status of change password request\r\n  changePasswordError: null,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  reducers: {\r\n    setCredentials: (state, action) => {\r\n      const { user, token } = action.payload;\r\n      state.user = user;\r\n      state.token = token;\r\n      localStorage.setItem('authToken', token);\r\n    },\r\n    logout: (state) => {\r\n      state.user = null;\r\n      state.token = null;\r\n      localStorage.removeItem('authToken');\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(changePassword.pending, (state) => {\r\n        state.changePasswordStatus = 'loading';\r\n        state.changePasswordError = null;\r\n      })\r\n      .addCase(changePassword.fulfilled, (state) => {\r\n        state.changePasswordStatus = 'succeeded';\r\n        state.changePasswordError = null;\r\n      })\r\n      .addCase(changePassword.rejected, (state, action) => {\r\n        state.changePasswordStatus = 'failed';\r\n        state.changePasswordError = action.payload;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { setCredentials, logout } = authSlice.actions;\r\nexport default authSlice.reducer;\r\n"],"mappings":"AAAA,OAASA,WAAW,CAAEC,gBAAgB,KAAQ,kBAAkB,CAEhE;AACA,MAAO,MAAM,CAAAC,cAAc,CAAGD,gBAAgB,CAC5C,qBAAqB,CACrB,MAAAE,IAAA,CAAAC,KAAA,GAAiE,IAA1D,CAAEC,eAAe,CAAEC,WAAY,CAAC,CAAAH,IAAA,IAAE,CAAEI,eAAgB,CAAC,CAAAH,KAAA,CAC1D,GAAI,CACF;AACA,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,sBAAsB,CAAE,CACnDC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAChB;AACA;AACF,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAET,eAAe,CAAEC,WAAY,CAAC,CACvD,CAAC,CAAC,CAEF,GAAI,CAACE,QAAQ,CAACO,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,2BAA2B,CAAC,CAC9C,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAClC,MAAO,CAAAD,IAAI,CAAE;AACf,CAAE,MAAOE,KAAK,CAAE,CACd,MAAO,CAAAZ,eAAe,CAACY,KAAK,CAACC,OAAO,CAAC,CACvC,CACF,CACF,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,CACnBC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAEC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,EAAI,IAAI,CAChDC,oBAAoB,CAAE,MAAM,CAAE;AAC9BC,mBAAmB,CAAE,IACvB,CAAC,CAED,KAAM,CAAAC,SAAS,CAAG5B,WAAW,CAAC,CAC5B6B,IAAI,CAAE,MAAM,CACZR,YAAY,CACZS,QAAQ,CAAE,CACRC,cAAc,CAAEA,CAACC,KAAK,CAAEC,MAAM,GAAK,CACjC,KAAM,CAAEX,IAAI,CAAEC,KAAM,CAAC,CAAGU,MAAM,CAACC,OAAO,CACtCF,KAAK,CAACV,IAAI,CAAGA,IAAI,CACjBU,KAAK,CAACT,KAAK,CAAGA,KAAK,CACnBC,YAAY,CAACW,OAAO,CAAC,WAAW,CAAEZ,KAAK,CAAC,CAC1C,CAAC,CACDa,MAAM,CAAGJ,KAAK,EAAK,CACjBA,KAAK,CAACV,IAAI,CAAG,IAAI,CACjBU,KAAK,CAACT,KAAK,CAAG,IAAI,CAClBC,YAAY,CAACa,UAAU,CAAC,WAAW,CAAC,CACtC,CACF,CAAC,CACDC,aAAa,CAAGC,OAAO,EAAK,CAC1BA,OAAO,CACJC,OAAO,CAACtC,cAAc,CAACuC,OAAO,CAAGT,KAAK,EAAK,CAC1CA,KAAK,CAACN,oBAAoB,CAAG,SAAS,CACtCM,KAAK,CAACL,mBAAmB,CAAG,IAAI,CAClC,CAAC,CAAC,CACDa,OAAO,CAACtC,cAAc,CAACwC,SAAS,CAAGV,KAAK,EAAK,CAC5CA,KAAK,CAACN,oBAAoB,CAAG,WAAW,CACxCM,KAAK,CAACL,mBAAmB,CAAG,IAAI,CAClC,CAAC,CAAC,CACDa,OAAO,CAACtC,cAAc,CAACyC,QAAQ,CAAE,CAACX,KAAK,CAAEC,MAAM,GAAK,CACnDD,KAAK,CAACN,oBAAoB,CAAG,QAAQ,CACrCM,KAAK,CAACL,mBAAmB,CAAGM,MAAM,CAACC,OAAO,CAC5C,CAAC,CAAC,CACN,CACF,CAAC,CAAC,CAEF,MAAO,MAAM,CAAEH,cAAc,CAAEK,MAAO,CAAC,CAAGR,SAAS,CAACgB,OAAO,CAC3D,cAAe,CAAAhB,SAAS,CAACiB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}